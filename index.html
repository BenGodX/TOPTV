<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TOPTV Playlist</title>
  <style>
    body { font-family: sans-serif; padding: 2em; white-space: pre-wrap; background: #f9f9f9; }
    .error { color: red; }
    pre { background: #222; color: #0f0; padding: 1em; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <script>
    const requiredToken = "lzzz5201";
    const urlToken = new URLSearchParams(window.location.search).get("token");
    if (urlToken !== requiredToken) {
      document.body.innerHTML = '<h2 class="error">ðŸ”’ Access Denied</h2><p>You must provide a valid token.</p>';
    } else {
      // Fetch playlist.m3u æ–‡ä»¶å†…å®¹å¹¶æ˜¾ç¤º
      fetch('./playlist.m3u')
        .then(response => {
          if (!response.ok) throw new Error('Failed to load playlist.m3u');
          return response.text();
        })
        .then(text => {
          document.body.innerHTML = '<h1>TOPTV Playlist (M3U å†…å®¹)</h1><pre>' 
            + text.replace(/</g, "&lt;").replace(/>/g, "&gt;") 
            + '</pre>';
        })
        .catch(err => {
          document.body.innerHTML = '<p class="error">åŠ è½½æ’­æ”¾åˆ—è¡¨å¤±è´¥ï¼š' + err.message + '</p>';
        });
    }
  </script>
</body>
</html>
